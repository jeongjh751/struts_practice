<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<!--helloworld環境構築-->
<!--<struts>-->
<!--    <package name="default" extends="struts-default">-->
<!--        <action name="hello" class="sample.HelloWorldAction" method="execute">-->
<!--            <result name="success">/view/sample/HelloWorld.jsp</result>-->
<!--        </action>-->
<!--    </package>-->
<!--</struts>-->

<struts>
    <!-- 開発モード：エラー詳細表示、自動リロード有効 -->
    <constant name="struts.devMode" value="true" />    
	<package name="default" extends="struts-default">
         <!-- 一覧表示 (トップページ) -->
        <action name="boardList" class="action.BoardAction" method="list">
            <result name="list">/board/list.jsp</result>
        </action>
        
        <!-- 詳細表示 -->
        <action name="boardDetail" class="action.BoardAction" method="detail">
            <result name="detail">/board/detail.jsp</result>
            <result name="error">/board/list.jsp</result>
        </action>
        
        <!-- 新規投稿フォーム表示 -->
        <action name="boardInput" class="action.BoardAction" method="input">
            <result name="input">/board/input.jsp</result>
        </action>
        
        <!-- 投稿実行 -->
        <action name="boardCreate" class="action.BoardAction" method="execute">
            <result name="success" type="redirect">boardList.action</result>
            <result name="input">/board/input.jsp</result>
        </action>
        
        <!-- 編集フォーム表示 -->
        <action name="boardEditForm" class="action.BoardAction" method="editForm">
            <result name="edit">/board/edit.jsp</result>
            <result name="list" type="redirect">boardList.action</result>
        </action>
        
        <!-- 編集実行 -->
        <action name="boardEdit" class="action.BoardAction" method="edit">
            <result name="list" type="redirect">boardList.action</result>
        </action>
        
        <!-- 削除 -->
        <action name="boardDelete" class="action.BoardAction" method="delete">
            <result name="list" type="redirect">boardList.action</result>
        </action>
        
        <!-- コメント関連アクション -->
		<action name="commentAdd" class="action.CommentAction" method="add">
		    <result name="success" type="redirectAction">
		        <param name="actionName">boardDetail</param>
		        <param name="boardId">${boardId}</param>
		    </result>
		    <result name="error" type="redirectAction">
		        <param name="actionName">boardDetail</param>
		        <param name="boardId">${boardId}</param>
		    </result>
		</action>
		
		<!-- コメント編集フォーム表示 -->
		<action name="commentEditForm" class="action.CommentAction" method="editForm">
		    <result name="edit">/WEB-INF/views/commentEdit.jsp</result>
		    <result name="error" type="redirectAction">
		        <param name="actionName">boardDetail</param>
		        <param name="boardId">${boardId}</param>
		    </result>
		</action>
		
		<!-- コメント編集 -->
		<action name="commentEditSubmit" class="action.CommentAction" method="edit">
		    <result name="success" type="redirectAction">
		        <param name="actionName">boardDetail</param>
		        <param name="boardId">${boardId}</param>
		    </result>
		    <result name="error" type="redirectAction">
		        <param name="actionName">boardDetail</param>
		        <param name="boardId">${boardId}</param>
		    </result>
		</action>
		
		<!-- コメント削除 -->
		<action name="commentDelete" class="action.CommentAction" method="delete">
		    <result name="success" type="redirectAction">
		        <param name="actionName">boardDetail</param>
		        <param name="boardId">${boardId}</param>
		    </result>
		    <result name="error" type="redirectAction">
		        <param name="actionName">boardDetail</param>
		        <param name="boardId">${boardId}</param>
		    </result>
		</action>
    </package>
</struts>